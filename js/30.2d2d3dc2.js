"use strict";(self["webpackChunkdoudou_nav"]=self["webpackChunkdoudou_nav"]||[]).push([[30],{2030:function(e,l,t){t.r(l),t.d(l,{default:function(){return z}});var a=t(3396),i=t(2268),u=t(4870),o=t(6e3),n=t(7178),r=t(7139),d=t(2049);const s=e=>((0,a.dD)("data-v-4ab0d0b6"),e=e(),(0,a.Cn)(),e),m={key:0,class:"website-left"},c={class:"website-left-box",key:"index"},w=["onClick"],p=s((()=>(0,a._)("div",{style:{height:"40px"}},null,-1))),f={class:"website-right-box"},g=["id"],v={class:"box"},b={class:"webBox"},_={key:0,class:"jianjie"},k=["href"],y={class:"webUrl"},W=["src"],h={key:1,class:"bianji"},D={class:"el-dropdown-link"},j={class:"webBox"},U={key:0,class:"jianjie"},x={class:"webUrl"},V=["src"],C={class:"dialog-footer"};var H={__name:"WebsiteView",setup(e){const l=(0,r.oR)(),t=(0,u.qj)((0,a.Fl)((()=>l.state.webArry))),s=(0,u.iH)(null),H=(0,u.iH)(!1),q=(0,u.iH)(!1),I=(0,u.qj)({sort:"",title:"",url:"",imgUrl:"",jianjie:""}),z=(0,u.iH)(null),B=(e,l,t)=>{const a=/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/;""===l||a.test(l)?t():t(new Error("请输入正确的网址"))},T=(0,u.qj)({title:{required:!0,message:"请输入网站名称",trigger:"blur"},url:[{required:!0,message:"请输入网页地址",trigger:"blur"},{validator:B,trigger:"blur"}],imgUrl:[{validator:B,trigger:"blur"}]}),Y=function(e,l,a){I.key=e.key,I.metaDataId=l.metaDataId,I.sort=e.title,I.selectData=t.value.map((e=>e.title)),q.value=!0,I.title=l.webName,I.url=l.url,I.jianjie=l.jianjie,I.imgUrl=l.imgUrl},S=function(e,t,a){o.T.confirm(`你确定要删除 <span style="color:#ec4141">${e.title}</span> 分类下的 <span style="color:#ec4141">${t.webName}</span> 吗?`,"警告",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,confirmButtonClass:"deleteButton"}).then((()=>{const a={key:e.key,metaDataId:t.metaDataId};l.commit("delData",a),K(),(0,n.z8)({message:"删除成功",type:"success"})})).catch((()=>{}))},E=function(){z.value.validate((e=>{e?(l.commit("editData",I),K(),q.value=!1,(0,n.z8)({message:"修改成功",type:"success"})):console.log("未通过")}))};async function K(){const e="DouDouDB",l="website",a=await d.ZP.openDB(e,l,1),i={id:1,data:JSON.stringify(t.value)};d.ZP.updateDB(a,l,i)}const N=(0,u.iH)(),$=(0,u.iH)("freeMovies"),F=(0,u.iH)(!1),L=e=>{F.value=!0,$.value=e;let l=document.querySelector(`#${e}`);N.value.scrollTo({top:l.offsetTop-40,behavior:"smooth"})},M=(0,u.qj)([]);let R=new IntersectionObserver((e=>{let l=e[0].target.id,a=e[0].isIntersecting;if(a){let e=M.findIndex((e=>e==l));-1==e&&M.push(l)}else{let e=M.findIndex((e=>e==l));-1!==e&&M.splice(e,1)}if(F.value)return;let i="";for(const u of t.value)if(-1!==M.findIndex((e=>e===u.key))){i=u.key;break}$.value=i}),{threshold:[0,.25,.5,1]});const Z=()=>{(0,a.Y3)((()=>{for(const e of t.value){let l=document.querySelector(`#${e.key}`);M.push(e.key),R.observe(l)}}))},O=(0,u.iH)(window.innerWidth);return(0,a.m0)((()=>{O.value<500?H.value=!1:H.value=!0})),window.addEventListener("resize",(()=>{O.value=window.innerWidth})),(0,a.bv)((()=>{let e=document.querySelector(".website-right-box");e.addEventListener("mousewheel",(()=>{F.value=!1})),Z()})),(e,l)=>{const u=(0,a.up)("el-scrollbar"),o=(0,a.up)("el-aside"),n=(0,a.up)("More"),r=(0,a.up)("el-icon"),d=(0,a.up)("Edit"),B=(0,a.up)("el-dropdown-item"),K=(0,a.up)("Delete"),F=(0,a.up)("el-dropdown-menu"),M=(0,a.up)("el-dropdown"),R=(0,a.up)("el-main"),Z=(0,a.up)("el-container"),O=(0,a.up)("el-divider"),P=(0,a.up)("el-option"),A=(0,a.up)("el-select"),G=(0,a.up)("el-form-item"),J=(0,a.up)("el-input"),Q=(0,a.up)("el-form"),X=(0,a.up)("el-button"),ee=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(Z,{class:"common-layout",ref_key:"divDom",ref:s},{default:(0,a.w5)((()=>[(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[t.length?((0,a.wg)(),(0,a.iD)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,((e,l)=>((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",{class:(0,i.C_)({active:e.key==$.value}),onClick:l=>L(e.key)},(0,i.zw)(e.title),11,w)])))),128))])):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{ref_key:"scrollbarRef",ref:N},{default:(0,a.w5)((()=>[p,(0,a._)("div",f,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"website-right-title",key:l,id:e.key},[(0,a._)("h2",null,(0,i.zw)(e.title),1),(0,a._)("div",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.childers,((l,t)=>((0,a.wg)(),(0,a.iD)("div",b,[l.jianjie?((0,a.wg)(),(0,a.iD)("div",_,(0,i.zw)(l.jianjie),1)):(0,a.kq)("",!0),((0,a.wg)(),(0,a.iD)("a",{href:l.url,target:"_blank",key:t},[(0,a._)("div",y,[(0,a._)("img",{src:l.imgUrl?l.imgUrl:"https://img.bidianer.com/image/icon/empty.svg"},null,8,W),(0,a._)("div",null,(0,i.zw)(l.webName),1)])],8,k)),H.value?((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(M,{trigger:"click"},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{onClick:a=>Y(e,l,t)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d)])),_:1}),(0,a.Uk)("编辑")])),_:2},1032,["onClick"]),(0,a.Wm)(B,{style:{color:"#F56C6C"},onClick:a=>S(e,l,t)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(K)])),_:1}),(0,a.Uk)("删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,a.w5)((()=>[(0,a._)("span",D,[(0,a.Wm)(r,{class:"on-inline"},{default:(0,a.w5)((()=>[(0,a.Wm)(n)])),_:1})])])),_:2},1024)])):(0,a.kq)("",!0)])))),256))])],8,g)))),128))])])),_:1},512)])),_:1})])),_:1},512),(0,a.Wm)(ee,{modelValue:q.value,"onUpdate:modelValue":l[6]||(l[6]=e=>q.value=e),title:"修改(开发中)",width:"500",class:"tanceng",style:{"border-radius":"5px"}},{footer:(0,a.w5)((()=>[(0,a._)("span",C,[(0,a.Wm)(X,{onClick:l[5]||(l[5]=e=>q.value=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1}),(0,a.Wm)(X,{type:"primary",onClick:E},{default:(0,a.w5)((()=>[(0,a.Uk)(" 确定 ")])),_:1})])])),default:(0,a.w5)((()=>[(0,a._)("div",(0,a.dG)({class:"box"},I),[(0,a._)("div",j,[I.jianjie?((0,a.wg)(),(0,a.iD)("div",U,(0,i.zw)(I.jianjie),1)):(0,a.kq)("",!0),(0,a._)("a",null,[(0,a._)("div",x,[(0,a._)("img",{src:I.imgUrl?I.imgUrl:"https://img.bidianer.com/image/icon/empty.svg"},null,8,V),(0,a._)("div",null,(0,i.zw)(I.title),1)])])])],16),(0,a.Wm)(O,{style:{"margin-top":"10px"}}),(0,a.Wm)(Q,{"label-width":"100px",rules:T,ref_key:"ruleFormRef",ref:z,model:I,style:{"max-width":"460px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{label:"分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{modelValue:I.sort,"onUpdate:modelValue":l[0]||(l[0]=e=>I.sort=e),placeholder:"请选择一个分类"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(I.selectData,((e,l)=>((0,a.wg)(),(0,a.j4)(P,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(G,{label:"网站名称",prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{modelValue:I.title,"onUpdate:modelValue":l[1]||(l[1]=e=>I.title=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(G,{label:"简介"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{modelValue:I.jianjie,"onUpdate:modelValue":l[2]||(l[2]=e=>I.jianjie=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(G,{label:"网页地址",prop:"url"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{modelValue:I.url,"onUpdate:modelValue":l[3]||(l[3]=e=>I.url=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(G,{label:"网页图标地址",prop:"imgUrl"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{clearable:"",modelValue:I.imgUrl,"onUpdate:modelValue":l[4]||(l[4]=e=>I.imgUrl=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["modelValue"])],64)}}},q=t(89);const I=(0,q.Z)(H,[["__scopeId","data-v-4ab0d0b6"]]);var z=I}}]);
//# sourceMappingURL=30.2d2d3dc2.js.map