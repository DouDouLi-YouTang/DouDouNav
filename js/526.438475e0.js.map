{"version":3,"file":"js/526.438475e0.js","mappings":"mUA2BA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,GAAQC,EAAAA,EAAAA,KAASC,EAAAA,EAAAA,KAAS,IAAMJ,EAAMK,MAAMC,WAE5CC,GAAUC,EAAAA,EAAAA,IAAI,QACdC,GAAOD,EAAAA,EAAAA,KAAI,GACXE,EAAWC,IACfF,EAAKG,OAAQ,EACbL,EAAQK,MAAQD,EAKhB,IAAIE,EAAUC,SAASC,cAAc,YACjCC,EAASF,SAASC,cAAe,IAAGJ,KACxCE,EAAQI,SAAS,CACfC,IAAKF,EAAOG,UAAY,GACxBC,SAAU,UACV,EA4CEC,IA1COlB,EAAAA,EAAAA,IAAS,CACpB,CACEQ,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,OACLW,KAAM,OAER,CACEX,IAAK,QACLW,KAAM,WAGOnB,EAAAA,EAAAA,IAAS,KAa1B,IAAIoB,EAAK,IAAIC,sBACVC,IAGC,IAAIC,EAAeD,EAAO,GAAGT,OAAOW,GAEhCC,EAAUH,EAAO,GAAGI,eAGxB,GAAID,EAAS,CAGX,IAAIE,EAAST,EAASU,WAAWC,GAASA,GAAQN,KACnC,GAAXI,GACFT,EAASY,KAAKP,EAElB,KAAO,CACL,IAAIQ,EAAQb,EAASU,WAAWC,GAASA,GAAQN,KAClC,IAAXQ,GACFb,EAASc,OAAOD,EAAO,EAE3B,IAEF,CAAEE,UAAW,CAAC,EAAG,IAAM,GAAK,MAE9BC,EAAAA,EAAAA,KAAY,KACV,GAAI5B,EAAKG,MAAO,OAChB,IAAI0B,EAAS,GAEb,IAAK,MAAMN,KAAQ9B,EAAMU,MACvB,IAAuD,IAAnDS,EAASU,WAAWpB,GAAQA,IAAQqB,EAAKrB,MAAa,CACxD2B,EAASN,EAAKrB,IACd,KACF,CAEFJ,EAAQK,MAAQ0B,CAAM,IAExBC,QAAQC,IAAIH,EAAAA,IAEZ,MAAMI,EAAaA,KAEjB,IAAK,MAAMT,KAAQ9B,EAAMU,MAAO,CAE9B,IAAI8B,EAAK5B,SAASC,cAAe,IAAGiB,EAAKrB,OACzCU,EAASY,KAAKD,EAAKrB,KAEnBY,EAAGoB,QAAQD,EACb,G,OAGFE,EAAAA,EAAAA,KAAU,KACR,IAAI/B,EAAUC,SAASC,cAAc,YACrCF,EAAQgC,iBAAiB,cAAc,KACrCN,QAAQC,IAAI,KACZ/B,EAAKG,OAAQ,CAAK,IAEpB6B,GAAY,I,0YCvJd,MAAMK,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://doudou-nav/./src/views/test2.vue","webpack://doudou-nav/./src/views/test2.vue?f6f5"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <ul class=\"menu\">\r\n      <li v-for=\"item in arrey\" :key=\"item.key\" :class=\"{ active: item.key == current }\" @click=\"liClick(item.key)\">\r\n        {{ item.title }}\r\n      </li>\r\n    </ul>\r\n    <div class=\"content\">\r\n      <div :id=\"item.key\" v-for=\"item in arrey\" :key=\"item.key\">\r\n        {{ item.title }}\r\n      </div>\r\n      <!-- <div id=\"key1\">国家1</div>\r\n      <div id=\"key2\">省份2</div>\r\n      <div id=\"key3\">城市3</div>\r\n      <div id=\"key4\">县城4</div>\r\n      <div id=\"key5\">国家5</div>\r\n      <div id=\"key6\">省份6</div>\r\n      <div id=\"key7\">城市7</div>\r\n      <div id=\"key8\">县城8</div>\r\n      <div id=\"key9\">县城9</div>\r\n      <div id=\"key10\">县城10</div> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { reactive, ref, onMounted, watchEffect, computed } from \"vue\";\r\nimport { useStore } from 'vuex';\r\nconst store = useStore()\r\nconst arrey = reactive(computed(() => store.state.webArry))\r\n// 默认高亮的标题\r\nconst current = ref(\"key1\");\r\nconst flag = ref(false);//----放开是另一种效果\r\nconst liClick = (key) => {\r\n  flag.value = true;//----放开是另一种效果\r\n  current.value = key;\r\n\r\n  /* \r\n  获取到key 然后渠道对应的元素 进行滚动\r\n   */\r\n  let content = document.querySelector(\".content\");\r\n  let target = document.querySelector(`#${key}`);\r\n  content.scrollTo({\r\n    top: target.offsetTop - 60,\r\n    behavior: \"smooth\",\r\n  });\r\n};\r\nconst list = reactive([\r\n  {\r\n    key: \"key1\",\r\n    name: \"国家1\",\r\n  },\r\n  {\r\n    key: \"key2\",\r\n    name: \"省份2\",\r\n  },\r\n  {\r\n    key: \"key3\",\r\n    name: \"城市3\",\r\n  },\r\n  {\r\n    key: \"key4\",\r\n    name: \"县城4\",\r\n  },\r\n  {\r\n    key: \"key5\",\r\n    name: \"国家5\",\r\n  },\r\n  {\r\n    key: \"key6\",\r\n    name: \"省份6\",\r\n  },\r\n  {\r\n    key: \"key7\",\r\n    name: \"城市7\",\r\n  },\r\n  {\r\n    key: \"key8\",\r\n    name: \"县城8\",\r\n  },\r\n  {\r\n    key: \"key9\",\r\n    name: \"县城9\",\r\n  },\r\n  {\r\n    key: \"key10\",\r\n    name: \"县城10\",\r\n  },\r\n]);\r\nconst showKeys = reactive([\r\n  // \"ke1\",\r\n  // \"key2\",\r\n  // \"key3\",\r\n  // \"key4\",\r\n  // \"key5\",\r\n  // \"key6\",\r\n  // \"key7\",\r\n  // \"key8\",\r\n  // \"key9\",\r\n  // \"key10\",\r\n]);\r\n// -----交叉观察器\r\nlet io = new IntersectionObserver(\r\n  (entrys) => {\r\n    // console.log(\"进入视口--\", entrys[0].target.id);\r\n    // 获取视图第一个元素id\r\n    let firstInsetId = entrys[0].target.id;\r\n    // 检查第一个元素是否可见\r\n    let isInter = entrys[0].isIntersecting;\r\n    // console.log(11111, isInter);\r\n\r\n    if (isInter) {\r\n      // 如果可见，\r\n      // \r\n      let isFind = showKeys.findIndex((item) => item == firstInsetId);\r\n      if (isFind == -1) {\r\n        showKeys.push(firstInsetId);\r\n      }\r\n    } else {\r\n      let index = showKeys.findIndex((item) => item == firstInsetId);\r\n      if (index !== -1) {\r\n        showKeys.splice(index, 1);\r\n      }\r\n    }\r\n  },\r\n  { threshold: [0, 0.25, 0.5, 1] }\r\n);\r\nwatchEffect(() => {\r\n  if (flag.value) return;//----放开是另一种效果\r\n  let result = \"\";\r\n\r\n  for (const item of arrey.value) {\r\n    if (showKeys.findIndex((key) => key === item.key) !== -1) {\r\n      result = item.key;\r\n      break;\r\n    }\r\n  }\r\n  current.value = result;\r\n});\r\nconsole.log(watchEffect);\r\n// ----初始化监听\r\nconst startObser = () => {\r\n\r\n  for (const item of arrey.value) {\r\n    // 找到数组对象中 所有key的dom 并把他放在 showKeys 中\r\n    let el = document.querySelector(`#${item.key}`);\r\n    showKeys.push(item.key);\r\n    // 对找到的dom元素进行监听\r\n    io.observe(el);\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  let content = document.querySelector(\".content\");//----放开是另一种效果\r\n  content.addEventListener(\"mouseenter\", () => {//----放开是另一种效果\r\n    console.log(123);\r\n    flag.value = false;\r\n  });\r\n  startObser();\r\n});\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n  height: calc(100vh - 60px);\r\n  background-color: #fff;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n\r\n  .menu {\r\n    margin-right: 5px;\r\n    width: 120px;\r\n    border: 1px solid pink;\r\n    padding: 0;\r\n    margin-bottom: 0;\r\n\r\n    li {\r\n      list-style: none;\r\n      height: 26px;\r\n      line-height: 26px;\r\n      font-size: 16px;\r\n      text-align: center;\r\n      cursor: pointer;\r\n\r\n      &:hover {\r\n        background-color: rgb(211, 14, 100);\r\n      }\r\n    }\r\n\r\n    li.active {\r\n      background-color: rgb(211, 14, 100);\r\n    }\r\n  }\r\n\r\n  .content {\r\n    width: calc(100% - 120px);\r\n    border: 1px solid red;\r\n    overflow-y: auto;\r\n    padding-top: 5px;\r\n\r\n    div {\r\n      height: 500px;\r\n      border: 1px solid rgb(0, 255, 21);\r\n      // margin-bottom: 3px;\r\n    }\r\n  }\r\n}\r\n</style>","import script from \"./test2.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./test2.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./test2.vue?vue&type=style&index=0&id=5bd4d961&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5bd4d961\"]])\n\nexport default __exports__"],"names":["store","useStore","arrey","reactive","computed","state","webArry","current","ref","flag","liClick","key","value","content","document","querySelector","target","scrollTo","top","offsetTop","behavior","showKeys","name","io","IntersectionObserver","entrys","firstInsetId","id","isInter","isIntersecting","isFind","findIndex","item","push","index","splice","threshold","watchEffect","result","console","log","startObser","el","observe","onMounted","addEventListener","__exports__"],"sourceRoot":""}