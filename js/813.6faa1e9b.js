"use strict";(self["webpackChunkdoudou_nav"]=self["webpackChunkdoudou_nav"]||[]).push([[813],{9813:function(e,l,t){t.r(l),t.d(l,{default:function(){return q}});var a=t(3396),i=t(2268),u=t(4870),o=t(6e3),n=t(7178),r=t(7139),s=t(2049);const d=e=>((0,a.dD)("data-v-5ef1b708"),e=e(),(0,a.Cn)(),e),m={key:0,class:"website-left"},c=["onClick"],w=d((()=>(0,a._)("div",{style:{height:"40px"}},null,-1))),p={class:"website-right-box"},f=["id"],v={class:"box"},g={key:0,class:"jianjie"},b=["href"],_={class:"webUrl"},k=["src"],y={key:1,class:"bianji"},h={class:"el-dropdown-link"},W={class:"webBox"},D={key:0,class:"jianjie"},j={class:"webUrl"},U=["src"],V={class:"dialog-footer"};var x={__name:"WebsiteView",setup(e){const l=(0,r.oR)();l.dispatch("createData");const t=(0,a.Fl)((()=>l.state.webArry)),d=(0,u.iH)(null),x=(0,u.iH)(!1),C=(0,u.iH)(!1),H=(0,u.qj)({sort:"",title:"",url:"",imgUrl:"",jianjie:""}),q=(0,u.iH)(null),I=(e,l,t)=>{const a=/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/;""===l||a.test(l)?t():t(new Error("请输入正确的网址"))},z=(0,u.qj)({title:{required:!0,message:"请输入网站名称",trigger:"blur"},url:[{required:!0,message:"请输入网页地址",trigger:"blur"},{validator:I,trigger:"blur"}],imgUrl:[{validator:I,trigger:"blur"}]}),B=function(e,l,a){H.key=e.key,H.metaDataId=l.metaDataId,H.sort=e.title,H.selectData=t.value.map((e=>e.title)),C.value=!0,H.title=l.webName,H.url=l.url,H.jianjie=l.jianjie,H.imgUrl=l.imgUrl},T=function(e,t,a){o.T.confirm(`你确定要删除 <span style="color:#ec4141">${e.title}</span> 分类下的 <span style="color:#ec4141">${t.webName}</span> 吗?`,"警告",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,confirmButtonClass:"deleteButton"}).then((()=>{const a={key:e.key,metaDataId:t.metaDataId};l.commit("delData",a),S(),(0,n.z8)({message:"删除成功",type:"success"})})).catch((()=>{}))},Y=function(){q.value.validate((e=>{e?(l.commit("editData",H),S(),C.value=!1,(0,n.z8)({message:"修改成功",type:"success"})):console.log("未通过")}))};async function S(){const e="DouDouDB",l="website",a=await s.ZP.openDB(e,l,1),i={id:1,data:JSON.stringify(t.value)};s.ZP.updateDB(a,l,i)}const E=(0,u.iH)(),K=(0,u.iH)("freeMovies"),N=(0,u.iH)(!1),$=e=>{N.value=!0,K.value=e;let l=document.querySelector(`#${e}`);E.value.scrollTo({top:l.offsetTop-40,behavior:"smooth"})},F=(0,u.qj)([]);let L=new IntersectionObserver((e=>{let l=e[0].target.id,a=e[0].isIntersecting;if(a){let e=F.findIndex((e=>e==l));-1==e&&F.push(l)}else{let e=F.findIndex((e=>e==l));-1!==e&&F.splice(e,1)}if(N.value)return;let i="";for(const u of t.value)if(-1!==F.findIndex((e=>e===u.key))){i=u.key;break}K.value=i}),{threshold:[0,.25,.5,1]});const M=()=>{(0,a.Y3)((()=>{for(const e of t.value){let l=document.querySelector(`#${e.key}`);F.push(e.key),L.observe(l)}}))},R=(0,u.iH)(window.innerWidth);return(0,a.m0)((()=>{R.value<500?x.value=!1:x.value=!0})),window.addEventListener("resize",(()=>{R.value=window.innerWidth})),(0,a.bv)((()=>{let e=document.querySelector(".website-right-box");e.addEventListener("mousewheel",(()=>{N.value=!1})),M()})),(e,l)=>{const u=(0,a.up)("el-scrollbar"),o=(0,a.up)("el-aside"),n=(0,a.up)("More"),r=(0,a.up)("el-icon"),s=(0,a.up)("Edit"),I=(0,a.up)("el-dropdown-item"),S=(0,a.up)("Delete"),N=(0,a.up)("el-dropdown-menu"),F=(0,a.up)("el-dropdown"),L=(0,a.up)("el-main"),M=(0,a.up)("el-container"),R=(0,a.up)("el-divider"),Z=(0,a.up)("el-option"),O=(0,a.up)("el-select"),P=(0,a.up)("el-form-item"),A=(0,a.up)("el-input"),G=(0,a.up)("el-form"),J=(0,a.up)("el-button"),Q=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(M,{class:"common-layout",ref_key:"divDom",ref:d},{default:(0,a.w5)((()=>[(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[t.value.length?((0,a.wg)(),(0,a.iD)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"website-left-box",key:l},[(0,a._)("div",{class:(0,i.C_)({active:e.key==K.value}),onClick:l=>$(e.key)},(0,i.zw)(e.title),11,c)])))),128))])):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{ref_key:"scrollbarRef",ref:E},{default:(0,a.w5)((()=>[w,(0,a._)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"website-right-title",key:l,id:e.key},[(0,a._)("h2",null,(0,i.zw)(e.title),1),(0,a._)("div",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.childers,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"webBox",key:t},[l.jianjie?((0,a.wg)(),(0,a.iD)("div",g,(0,i.zw)(l.jianjie),1)):(0,a.kq)("",!0),(0,a._)("a",{href:l.url,target:"_blank"},[(0,a._)("div",_,[(0,a._)("img",{src:l.imgUrl?l.imgUrl:"https://img.bidianer.com/image/icon/empty.svg"},null,8,k),(0,a._)("div",null,(0,i.zw)(l.webName),1)])],8,b),x.value?((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(F,{trigger:"click"},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,{onClick:a=>B(e,l,t)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1}),(0,a.Uk)("编辑")])),_:2},1032,["onClick"]),(0,a.Wm)(I,{style:{color:"#F56C6C"},onClick:a=>T(e,l,t)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S)])),_:1}),(0,a.Uk)("删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,a.w5)((()=>[(0,a._)("span",h,[(0,a.Wm)(r,{class:"on-inline"},{default:(0,a.w5)((()=>[(0,a.Wm)(n)])),_:1})])])),_:2},1024)])):(0,a.kq)("",!0)])))),128))])],8,f)))),128))])])),_:1},512)])),_:1})])),_:1},512),(0,a.Wm)(Q,{modelValue:C.value,"onUpdate:modelValue":l[6]||(l[6]=e=>C.value=e),title:"修改(开发中)",width:"500",class:"tanceng",style:{"border-radius":"5px"}},{footer:(0,a.w5)((()=>[(0,a._)("span",V,[(0,a.Wm)(J,{onClick:l[5]||(l[5]=e=>C.value=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1}),(0,a.Wm)(J,{type:"primary",onClick:Y},{default:(0,a.w5)((()=>[(0,a.Uk)(" 确定 ")])),_:1})])])),default:(0,a.w5)((()=>[(0,a._)("div",(0,a.dG)({class:"box"},H),[(0,a._)("div",W,[H.jianjie?((0,a.wg)(),(0,a.iD)("div",D,(0,i.zw)(H.jianjie),1)):(0,a.kq)("",!0),(0,a._)("a",null,[(0,a._)("div",j,[(0,a._)("img",{src:H.imgUrl?H.imgUrl:"https://img.bidianer.com/image/icon/empty.svg"},null,8,U),(0,a._)("div",null,(0,i.zw)(H.title),1)])])])],16),(0,a.Wm)(R,{style:{"margin-top":"10px"}}),(0,a.Wm)(G,{"label-width":"100px",rules:z,ref_key:"ruleFormRef",ref:q,model:H,style:{"max-width":"460px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{label:"分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{modelValue:H.sort,"onUpdate:modelValue":l[0]||(l[0]=e=>H.sort=e),placeholder:"请选择一个分类"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(H.selectData,((e,l)=>((0,a.wg)(),(0,a.j4)(Z,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(P,{label:"网站名称",prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{modelValue:H.title,"onUpdate:modelValue":l[1]||(l[1]=e=>H.title=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(P,{label:"简介"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{modelValue:H.jianjie,"onUpdate:modelValue":l[2]||(l[2]=e=>H.jianjie=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(P,{label:"网页地址",prop:"url"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{modelValue:H.url,"onUpdate:modelValue":l[3]||(l[3]=e=>H.url=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(P,{label:"网页图标地址",prop:"imgUrl"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{clearable:"",modelValue:H.imgUrl,"onUpdate:modelValue":l[4]||(l[4]=e=>H.imgUrl=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["modelValue"])],64)}}},C=t(89);const H=(0,C.Z)(x,[["__scopeId","data-v-5ef1b708"]]);var q=H}}]);
//# sourceMappingURL=813.6faa1e9b.js.map