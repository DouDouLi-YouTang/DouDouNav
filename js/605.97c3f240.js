"use strict";(self["webpackChunkdoudou_nav"]=self["webpackChunkdoudou_nav"]||[]).push([[605],{6605:function(e,l,t){t.r(l),t.d(l,{default:function(){return I}});var a=t(3396),i=t(2268),u=t(4870),o=t(6e3),n=t(7178),r=t(7139),s=t(2049);const d=e=>((0,a.dD)("data-v-a54ac298"),e=e(),(0,a.Cn)(),e),m={key:0,class:"website-left"},c=["onClick"],w=d((()=>(0,a._)("div",{style:{height:"40px"}},null,-1))),p={class:"website-right-box"},v=["id"],f={class:"website-right-title-box"},g={class:"box"},_={key:0,class:"jianjie"},b=["href"],k={class:"webUrl"},y=["src"],h={key:1,class:"bianji"},W={class:"el-dropdown-link"},D={class:"webBox"},j={key:0,class:"jianjie"},U={class:"webUrl"},x=["src"],V={class:"dialog-footer"};var C={__name:"WebsiteView",setup(e){const l=(0,r.oR)();l.dispatch("createData");const t=(0,a.Fl)((()=>l.state.webArry)),d=(0,u.iH)(null),C=(0,u.iH)(!1),H=(0,u.iH)(!1),q=(0,u.qj)({sort:"",title:"",url:"",imgUrl:"",jianjie:""}),I=(0,u.iH)(null),z=(e,l,t)=>{const a=/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/;""===l||a.test(l)?t():t(new Error("请输入正确的网址"))},B=(0,u.qj)({title:{required:!0,message:"请输入网站名称",trigger:"blur"},url:[{required:!0,message:"请输入网页地址",trigger:"blur"},{validator:z,trigger:"blur"}],imgUrl:[{validator:z,trigger:"blur"}]}),T=function(e,l,a){q.key=e.key,q.metaDataId=l.metaDataId,q.sort=e.title,q.selectData=t.value.map((e=>e.title)),H.value=!0,q.title=l.webName,q.url=l.url,q.jianjie=l.jianjie,q.imgUrl=l.imgUrl},Y=function(e,t,a){o.T.confirm(`你确定要删除 <span style="color:#ec4141">${e.title}</span> 分类下的 <span style="color:#ec4141">${t.webName}</span> 吗?`,"警告",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,confirmButtonClass:"deleteButton"}).then((()=>{const a={key:e.key,metaDataId:t.metaDataId};l.commit("delData",a),E(),(0,n.z8)({message:"删除成功",type:"success"})})).catch((()=>{}))},S=function(){I.value.validate((e=>{e?(l.commit("editData",q),E(),H.value=!1,(0,n.z8)({message:"修改成功",type:"success"})):console.log("未通过")}))};async function E(){const e="DouDouDB",l="website",a=await s.ZP.openDB(e,l,1),i={id:1,data:JSON.stringify(t.value)};s.ZP.updateDB(a,l,i)}const K=(0,u.iH)(),N=(0,u.iH)("freeMovies"),$=(0,u.iH)(!1),F=e=>{$.value=!0,N.value=e;let l=document.querySelector(`#${e}`);K.value.scrollTo({top:l.offsetTop-40,behavior:"smooth"})},L=(0,u.qj)([]);let M=new IntersectionObserver((e=>{let l=e[0].target.id,a=e[0].isIntersecting;if(a){let e=L.findIndex((e=>e==l));-1==e&&L.push(l)}else{let e=L.findIndex((e=>e==l));-1!==e&&L.splice(e,1)}if($.value)return;let i="";for(const u of t.value)if(-1!==L.findIndex((e=>e===u.key))){i=u.key;break}N.value=i}),{threshold:[0,.25,.5,1]});const R=()=>{(0,a.Y3)((()=>{for(const e of t.value){let l=document.querySelector(`#${e.key}`);L.push(e.key),M.observe(l)}}))},Z=(0,u.iH)(window.innerWidth);return(0,a.m0)((()=>{Z.value<500?C.value=!1:C.value=!0})),window.addEventListener("resize",(()=>{Z.value=window.innerWidth})),(0,a.bv)((()=>{let e=document.querySelector(".website-right-box");e.addEventListener("mousewheel",(()=>{$.value=!1})),R()})),(e,l)=>{const u=(0,a.up)("el-scrollbar"),o=(0,a.up)("el-aside"),n=(0,a.up)("More"),r=(0,a.up)("el-icon"),s=(0,a.up)("Edit"),z=(0,a.up)("el-dropdown-item"),E=(0,a.up)("Delete"),$=(0,a.up)("el-dropdown-menu"),L=(0,a.up)("el-dropdown"),M=(0,a.up)("el-main"),R=(0,a.up)("el-container"),Z=(0,a.up)("el-divider"),O=(0,a.up)("el-option"),P=(0,a.up)("el-select"),A=(0,a.up)("el-form-item"),G=(0,a.up)("el-input"),J=(0,a.up)("el-form"),Q=(0,a.up)("el-button"),X=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(R,{class:"common-layout",ref_key:"divDom",ref:d},{default:(0,a.w5)((()=>[(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[t.value.length?((0,a.wg)(),(0,a.iD)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"website-left-box",key:l},[(0,a._)("div",{class:(0,i.C_)({active:e.key==N.value}),onClick:l=>F(e.key)},(0,i.zw)(e.title),11,c)])))),128))])):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(M,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{ref_key:"scrollbarRef",ref:K},{default:(0,a.w5)((()=>[w,(0,a._)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"website-right-title",key:l,id:e.key},[(0,a._)("div",f,[(0,a._)("h2",null,(0,i.zw)(e.title),1)]),(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.childers,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"webBox",key:t},[l.jianjie?((0,a.wg)(),(0,a.iD)("div",_,(0,i.zw)(l.jianjie),1)):(0,a.kq)("",!0),(0,a._)("a",{href:l.url,target:"_blank"},[(0,a._)("div",k,[(0,a._)("img",{src:l.imgUrl?l.imgUrl:"https://img.bidianer.com/image/icon/empty.svg"},null,8,y),(0,a._)("div",null,(0,i.zw)(l.webName),1)])],8,b),C.value?((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(L,{trigger:"click"},{dropdown:(0,a.w5)((()=>[(0,a.Wm)($,null,{default:(0,a.w5)((()=>[(0,a.Wm)(z,{onClick:a=>T(e,l,t)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1}),(0,a.Uk)("编辑")])),_:2},1032,["onClick"]),(0,a.Wm)(z,{style:{color:"#F56C6C"},onClick:a=>Y(e,l,t)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E)])),_:1}),(0,a.Uk)("删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,a.w5)((()=>[(0,a._)("span",W,[(0,a.Wm)(r,{class:"on-inline"},{default:(0,a.w5)((()=>[(0,a.Wm)(n)])),_:1})])])),_:2},1024)])):(0,a.kq)("",!0)])))),128))])],8,v)))),128))])])),_:1},512)])),_:1})])),_:1},512),(0,a.Wm)(X,{modelValue:H.value,"onUpdate:modelValue":l[6]||(l[6]=e=>H.value=e),title:"修改(开发中)",width:"500",class:"tanceng",style:{"border-radius":"5px"}},{footer:(0,a.w5)((()=>[(0,a._)("span",V,[(0,a.Wm)(Q,{onClick:l[5]||(l[5]=e=>H.value=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1}),(0,a.Wm)(Q,{type:"primary",onClick:S},{default:(0,a.w5)((()=>[(0,a.Uk)(" 确定 ")])),_:1})])])),default:(0,a.w5)((()=>[(0,a._)("div",(0,a.dG)({class:"box"},q),[(0,a._)("div",D,[q.jianjie?((0,a.wg)(),(0,a.iD)("div",j,(0,i.zw)(q.jianjie),1)):(0,a.kq)("",!0),(0,a._)("a",null,[(0,a._)("div",U,[(0,a._)("img",{src:q.imgUrl?q.imgUrl:"https://img.bidianer.com/image/icon/empty.svg"},null,8,x),(0,a._)("div",null,(0,i.zw)(q.title),1)])])])],16),(0,a.Wm)(Z,{style:{"margin-top":"10px"}}),(0,a.Wm)(J,{"label-width":"100px",rules:B,ref_key:"ruleFormRef",ref:I,model:q,style:{"max-width":"460px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{label:"分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{modelValue:q.sort,"onUpdate:modelValue":l[0]||(l[0]=e=>q.sort=e),placeholder:"请选择一个分类"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.selectData,((e,l)=>((0,a.wg)(),(0,a.j4)(O,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(A,{label:"网站名称",prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{modelValue:q.title,"onUpdate:modelValue":l[1]||(l[1]=e=>q.title=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(A,{label:"简介"},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{modelValue:q.jianjie,"onUpdate:modelValue":l[2]||(l[2]=e=>q.jianjie=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(A,{label:"网页地址",prop:"url"},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{modelValue:q.url,"onUpdate:modelValue":l[3]||(l[3]=e=>q.url=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(A,{label:"网页图标地址",prop:"imgUrl"},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{clearable:"",modelValue:q.imgUrl,"onUpdate:modelValue":l[4]||(l[4]=e=>q.imgUrl=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["modelValue"])],64)}}},H=t(89);const q=(0,H.Z)(C,[["__scopeId","data-v-a54ac298"]]);var I=q}}]);
//# sourceMappingURL=605.97c3f240.js.map